\hypertarget{shape__polybezier_8hpp_source}{}\doxysection{shape\+\_\+polybezier.\+hpp}
\label{shape__polybezier_8hpp_source}\index{/Users/lzhshou/Documents/Research/myProjects/apaam/repo/netdem/src/shape/shape\_polybezier.hpp@{/Users/lzhshou/Documents/Research/myProjects/apaam/repo/netdem/src/shape/shape\_polybezier.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ "{}shape.hpp"{}}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ "{}stl\_model.hpp"{}}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}stl\_reader.hpp"{}}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ <iostream>}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00013\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacenetdem}{netdem}}\ \{}
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00025\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnetdem_1_1_polybezier}{Polybezier}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classnetdem_1_1_shape}{Shape}}\ \{}
\DoxyCodeLine{00026\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00027\ \ \ \textcolor{comment}{//\ num\_patches\ have\ to\ be\ even}}
\DoxyCodeLine{00028\ \ \ \textcolor{keywordtype}{int}\ num\_patches\{30\},\ order\{2\};\ \textcolor{comment}{//\ only\ second\ order\ implemented\ for\ now}}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \ \ \textcolor{comment}{//\ [num\ of\ faces]\ by\ num\ of\ knots\ (e.g.,\ 6\ for\ 2nd\ order)\ by\ 3}}
\DoxyCodeLine{00031\ \ \ VecXT<VecXT<Vec3d>>\ face\_patch\_knots\_list;}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ \ \ \textcolor{comment}{//\ [num\ of\ faces]\ by\ 3\ vertices\ by\ 3}}
\DoxyCodeLine{00034\ \ \ VecXT<VecXT<Vec3d>>\ face\_patch\_normals\_list;}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ \ \ \textcolor{comment}{//\ [num\ of\ faces*3/2]\ by\ num\ of\ knots\ (e.g.,\ 6\ for\ 2nd\ order)\ by\ 3}}
\DoxyCodeLine{00037\ \ \ VecXT<VecXT<Vec3d>>\ edge\_patch\_knots\_list;}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \ \ \textcolor{comment}{//\ [num\ of\ faces]\ by\ 3,\ used\ to\ find\ the\ edge\ patches\ for\ a\ face\ patch}}
\DoxyCodeLine{00040\ \ \ VecXT<Vec3i>\ linked\_edges\_list;}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \ \ \textcolor{comment}{//\ [6*num\_cells\string^2]\ by\ [num\ of\ patches]}}
\DoxyCodeLine{00043\ \ \ VecXT<VecXT<int>>\ linked\_patches\_list;}
\DoxyCodeLine{00044\ \ \ \textcolor{keywordtype}{int}\ num\_cells\{4\};}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00049\ \ \ \mbox{\hyperlink{classnetdem_1_1_polybezier_a310db06214373de8588a02916ef8616c}{Polybezier}}();}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00059\ \ \ nlohmann::json\ \mbox{\hyperlink{classnetdem_1_1_polybezier_ae286a4defe8607e3bf2ffd771ebae261}{PackJson}}()\ \textcolor{keyword}{override};}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00069\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classnetdem_1_1_polybezier_aa812d6b44f8fc2e6679b25009c659cad}{InitFromJson}}(nlohmann::json\ \textcolor{keyword}{const}\ \&js)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00078\ \ \ \mbox{\hyperlink{classnetdem_1_1_shape}{Shape}}\ *\mbox{\hyperlink{classnetdem_1_1_polybezier_a439a9125f96253fa67b83cb3fa126490}{Clone}}()\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00086\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classnetdem_1_1_polybezier_afa6b26c41ac4b7d67605b5195d31cb94}{InitByRandom}}();}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00097\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classnetdem_1_1_polybezier_ad6fb2162349c6483a61572326cc405a6}{InitFromKernelSTL}}(std::string\ \textcolor{keyword}{const}\ \&file);}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00107\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classnetdem_1_1_polybezier_ad6fb2162349c6483a61572326cc405a6}{InitFromKernelSTL}}(\mbox{\hyperlink{classnetdem_1_1_s_t_l_model}{STLModel}}\ \textcolor{keyword}{const}\ \&stl\_model);}
\DoxyCodeLine{00108\ }
\DoxyCodeLine{00115\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classnetdem_1_1_polybezier_a6d749ac649b147ad1f6cd540e3dbe080}{Init}}();}
\DoxyCodeLine{00116\ }
\DoxyCodeLine{00123\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classnetdem_1_1_polybezier_a54241720500d2a90fb5652b8f750ea25}{UpdateShapeProperties}}()\ \textcolor{keyword}{override};}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00133\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classnetdem_1_1_polybezier_af384e6ec1edaa5375b86971601528080}{SetSize}}(\textcolor{keywordtype}{double}\ d)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00134\ }
\DoxyCodeLine{00145\ \ \ \mbox{\hyperlink{classnetdem_1_1_s_t_l_model}{STLModel}}\ \mbox{\hyperlink{classnetdem_1_1_polybezier_a063a225810a381792101b8605365cb48}{GetSTLModel}}(\textcolor{keywordtype}{int}\ num\_facets\ =\ 400)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00160\ \ \ \mbox{\hyperlink{classnetdem_1_1_s_t_l_model}{STLModel}}\ \mbox{\hyperlink{classnetdem_1_1_polybezier_aceafc98349bcb17dc9cc766a0489d465}{GetSTLModel\_v2}}(\textcolor{keywordtype}{int}\ num\_facets\ =\ 400);}
\DoxyCodeLine{00161\ }
\DoxyCodeLine{00170\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classnetdem_1_1_polybezier_a557097154fc91ec51a7de8a8c33a89e6}{SaveNormalPatchesSpherical}}(std::string\ \textcolor{keyword}{const}\ \&file);}
\DoxyCodeLine{00171\ }
\DoxyCodeLine{00180\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classnetdem_1_1_polybezier_aa340e7dae1dc62af6f34e00cd4507d27}{SaveNormalPatchesCubic}}(std::string\ \textcolor{keyword}{const}\ \&file);}
\DoxyCodeLine{00181\ }
\DoxyCodeLine{00194\ \ \ Vec3d\ \mbox{\hyperlink{classnetdem_1_1_polybezier_a622e64685d49416ca42732c5466a9b1a}{SupportPoint}}(Vec3d\ \textcolor{keyword}{const}\ \&dir)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00195\ }
\DoxyCodeLine{00208\ \ \ VecXT<Vec3d>\ \mbox{\hyperlink{classnetdem_1_1_polybezier_ac96d550cd6d9e4ef692fe5b882779d8d}{SupportPoints}}(Vec3d\ \textcolor{keyword}{const}\ \&dir)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00209\ }
\DoxyCodeLine{00216\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classnetdem_1_1_polybezier_ab0c76c3d8158f3a4fb764fdb407e9912}{Print}}()\ \textcolor{keyword}{override};}
\DoxyCodeLine{00217\ }
\DoxyCodeLine{00218\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00225\ \ \ \textcolor{keywordtype}{void}\ AlignAxes();}
\DoxyCodeLine{00226\ }
\DoxyCodeLine{00234\ \ \ \textcolor{keywordtype}{void}\ UpdateLinkedPatches();}
\DoxyCodeLine{00235\ }
\DoxyCodeLine{00236\ \ \ VecXT<VecNT<Vec3d,\ 3>>\ mat\_du\_list,\ mat\_dv\_list;}
\DoxyCodeLine{00237\ }
\DoxyCodeLine{00244\ \ \ \textcolor{keywordtype}{void}\ UpdataMatDuDv();}
\DoxyCodeLine{00245\ }
\DoxyCodeLine{00257\ \ \ Vec3d\ GetEdgeKnot(Vec3d\ \textcolor{keyword}{const}\ \&v0,\ Vec3d\ \textcolor{keyword}{const}\ \&v1,\ Vec3d\ \textcolor{keyword}{const}\ \&n01);}
\DoxyCodeLine{00258\ }
\DoxyCodeLine{00269\ \ \ \textcolor{keywordtype}{void}\ GetUniqueEdges(VecXT<Vec2i>\ *\textcolor{keyword}{const}\ edges,}
\DoxyCodeLine{00270\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ VecXT<Vec3i>\ *\textcolor{keyword}{const}\ linked\_list,}
\DoxyCodeLine{00271\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classnetdem_1_1_s_t_l_model}{STLModel}}\ \textcolor{keyword}{const}\ \&stl\_model);}
\DoxyCodeLine{00272\ }
\DoxyCodeLine{00284\ \ \ Vec3d\ GetPatchNormal(Vec3d\ \textcolor{keyword}{const}\ \&v0,\ Vec3d\ \textcolor{keyword}{const}\ \&v1,\ Vec3d\ \textcolor{keyword}{const}\ \&v2);}
\DoxyCodeLine{00285\ }
\DoxyCodeLine{00294\ \ \ \textcolor{keywordtype}{void}\ SortNormalPatchVertices(VecXT<Vec3d>\ *\textcolor{keyword}{const}\ normals);}
\DoxyCodeLine{00295\ }
\DoxyCodeLine{00305\ \ \ VecXT<Vec3d>\ GetCartesianProject(\textcolor{keyword}{const}\ VecXT<Vec3d>\ \&normals);}
\DoxyCodeLine{00306\ }
\DoxyCodeLine{00318\ \ \ VecXT<Vec3d>\ GetCartesianProject(Vec3d\ \textcolor{keyword}{const}\ \&v1,\ Vec3d\ \textcolor{keyword}{const}\ \&v2);}
\DoxyCodeLine{00319\ }
\DoxyCodeLine{00332\ \ \ \textcolor{keywordtype}{bool}\ ContainCorner(Vec3d\ \textcolor{keyword}{const}\ \&corner,\ \textcolor{keyword}{const}\ VecXT<Vec3d>\ \&normals);}
\DoxyCodeLine{00333\ }
\DoxyCodeLine{00345\ \ \ \mbox{\hyperlink{classnetdem_1_1_s_t_l_model}{STLModel}}\ \mbox{\hyperlink{classnetdem_1_1_polybezier_a063a225810a381792101b8605365cb48}{GetSTLModel}}(\textcolor{keyword}{const}\ VecXT<Vec3d>\ \&knots,\ \textcolor{keywordtype}{int}\ num\_facets\_each);}
\DoxyCodeLine{00346\ }
\DoxyCodeLine{00357\ \ \ \textcolor{keywordtype}{int}\ GetSupportPatchID(Vec3d\ \textcolor{keyword}{const}\ \&dir);}
\DoxyCodeLine{00358\ \};}
\DoxyCodeLine{00359\ }
\DoxyCodeLine{00360\ \}\ \textcolor{comment}{//\ namespace\ netdem}}

\end{DoxyCode}
