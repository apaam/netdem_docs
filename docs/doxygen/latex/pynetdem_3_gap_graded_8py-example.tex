\hypertarget{pynetdem_3_gap_graded_8py-example}{}\doxysection{pynetdem\+\_\+3\+\_\+gap\+\_\+graded.\+py}
This is an example of how to use the netdem library.


\begin{DoxyCodeInclude}{0}
\DoxyCodeLine{00001\ \textcolor{keyword}{import}\ sys}
\DoxyCodeLine{00002\ \textcolor{keyword}{import}\ os}
\DoxyCodeLine{00003\ dir\_path\ =\ os.path.dirname(os.path.realpath(\_\_file\_\_))}
\DoxyCodeLine{00004\ sys.path.append(dir\_path\ +\ \textcolor{stringliteral}{"{}/../../build/lib/"{}})}
\DoxyCodeLine{00005\ }
\DoxyCodeLine{00006\ \textcolor{keyword}{import}\ pynetdem}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{comment}{\#\ simulation\ settings}}
\DoxyCodeLine{00009\ sim\ =\ pynetdem.Simulation()}
\DoxyCodeLine{00010\ sim.domain\_manager.SetBound(-\/1.6,\ -\/1.6,\ -\/1.6,\ 1.6,\ 1.6,\ 1.6)}
\DoxyCodeLine{00011\ sim.domain\_manager.SetCellSpacing(0.3,\ 0.3,\ 0.3)}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ \textcolor{comment}{\#\ \#\ contact\ settings}}
\DoxyCodeLine{00014\ \textcolor{comment}{\#\ sim.dem\_solver.contact\_solver\_factory.settings.solver\_type\ \(\backslash\)}}
\DoxyCodeLine{00015\ \textcolor{comment}{\#\ \ \ \ \ =\ pynetdem.ContactSolverSettings.SolverType.sdf}}
\DoxyCodeLine{00016\ \textcolor{comment}{\#\ sim.dem\_solver.contact\_solver\_factory.settings.sdf\_potential\_type\ =\ 0}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ cnt\_model\ =\ pynetdem.LinearSpring(2.0e6,\ 1.0e6,\ 0.7,\ 0.5)}
\DoxyCodeLine{00019\ cnt\_model\_prt\ =\ sim.scene.InsertContactModel(cnt\_model)}
\DoxyCodeLine{00020\ sim.scene.SetNumberOfMaterials(1)}
\DoxyCodeLine{00021\ sim.scene.SetCollisionModel(0,\ 0,\ cnt\_model\_prt)}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ tri\_mesh\ =\ pynetdem.TriMesh()}
\DoxyCodeLine{00024\ tri\_mesh.InitFromSTL(\textcolor{stringliteral}{"{}data/particle\_template.stl"{}})}
\DoxyCodeLine{00025\ tri\_mesh.Decimate(1000)}
\DoxyCodeLine{00026\ \textcolor{comment}{\#\ tri\_mesh.MakeConvex()}}
\DoxyCodeLine{00027\ tri\_mesh.AlignAxes()}
\DoxyCodeLine{00028\ tri\_mesh.SetSize(0.4)}
\DoxyCodeLine{00029\ tri\_mesh\_ptr\ =\ sim.scene.InsertShape(tri\_mesh)}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ sphere\ =\ pynetdem.PointSphere(0.05)}
\DoxyCodeLine{00032\ sphere\_ptr\ =\ sim.scene.InsertShape(sphere)}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ pack\_generator\ =\ pynetdem.PackGenerator()}
\DoxyCodeLine{00035\ particle\_list\_1\ =\ pack\_generator.GetVoronoiPack(}
\DoxyCodeLine{00036\ \ \ \ \ 1,\ 1,\ 0.8,\ -\/0.1,\ 0,\ 0,\ 6,\ tri\_mesh\_ptr)}
\DoxyCodeLine{00037\ sim.scene.InsertParticle(particle\_list\_1)}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ particle\_list\ =\ pack\_generator.GetGridPack(}
\DoxyCodeLine{00040\ \ \ \ \ 1,\ 1,\ 0.2,\ 0,\ 0,\ 0.4,\ 8,\ 8,\ 2,\ sphere\_ptr)}
\DoxyCodeLine{00041\ \textcolor{keywordflow}{for}\ p\ \textcolor{keywordflow}{in}\ particle\_list:}
\DoxyCodeLine{00042\ \ \ \ \ p.SetVelocity(0,\ 0,\ -\/2.0)}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ wall\_box\ =\ pynetdem.WallBoxPlane(1,\ 1,\ 1,\ 0,\ 0,\ 0)}
\DoxyCodeLine{00045\ wall\_box.ImportToScene(sim.scene)}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ grav\ =\ pynetdem.Gravity()}
\DoxyCodeLine{00048\ grav.Init(sim)}
\DoxyCodeLine{00049\ sim.modifier\_manager.Insert(grav)}
\DoxyCodeLine{00050\ sim.modifier\_manager.Enable(grav.label)}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ data\_dumper\ =\ pynetdem.DataDumper()}
\DoxyCodeLine{00053\ data\_dumper.Init(sim)}
\DoxyCodeLine{00054\ data\_dumper.SetRootPath(\textcolor{stringliteral}{"{}tmp/out/"{}})}
\DoxyCodeLine{00055\ data\_dumper.SetSaveByCycles(100)}
\DoxyCodeLine{00056\ data\_dumper.dump\_contact\_info\ =\ \textcolor{keyword}{True}}
\DoxyCodeLine{00057\ data\_dumper.dump\_wall\_info\ =\ \textcolor{keyword}{True}}
\DoxyCodeLine{00058\ data\_dumper.dump\_mesh\ =\ \textcolor{keyword}{True}}
\DoxyCodeLine{00059\ data\_dumper.dump\_reconstructed\ =\ \textcolor{keyword}{True}}
\DoxyCodeLine{00060\ data\_dumper.SaveShapeInfoAsSTL()}
\DoxyCodeLine{00061\ sim.modifier\_manager.Insert(data\_dumper)}
\DoxyCodeLine{00062\ sim.modifier\_manager.Enable(data\_dumper.label)}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ sim.Run(0.5)}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(20):}
\DoxyCodeLine{00067\ \ \ \ \ sim.scene.InsertParticle(particle\_list)}
\DoxyCodeLine{00068\ \ \ \ \ sim.Run(0.1)}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00070\ sim.Run(0.5)}

\end{DoxyCodeInclude}
 