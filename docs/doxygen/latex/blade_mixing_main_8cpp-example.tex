\hypertarget{blade_mixing_main_8cpp-example}{}\doxysection{blade\+\_\+mixing\+\_\+main.\+cpp}
This is an example of how to use the netdem library.


\begin{DoxyCodeInclude}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ "{}data\_dumper.hpp"{}}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ "{}gen\_pack.hpp"{}}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ "{}gen\_wall\_box\_plane.hpp"{}}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ "{}gravity.hpp"{}}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ "{}model\_linear\_spring.hpp"{}}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ "{}shape\_cylinder.hpp"{}}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ "{}shape\_sphere.hpp"{}}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ "{}shape\_triangle.hpp"{}}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ "{}simulation.hpp"{}}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ <iostream>}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ <unordered\_map>}}
\DoxyCodeLine{\textcolor{keyword}{using\ namespace\ }\mbox{\hyperlink{namespacenetdem}{netdem}};}
\DoxyCodeLine{\textcolor{keyword}{using\ namespace\ }std;}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordtype}{void}\ ImportWall(\mbox{\hyperlink{classnetdem_1_1_simulation}{Simulation}}\ *sim)\ \{}
\DoxyCodeLine{\ \ \mbox{\hyperlink{classnetdem_1_1_s_t_l_model}{STLModel}}\ cylinder\_stl;}
\DoxyCodeLine{\ \ cylinder\_stl.\mbox{\hyperlink{classnetdem_1_1_s_t_l_model_abb01a9583427f88f59d2abdf79b1e981}{InitFromSTL}}(\textcolor{stringliteral}{"{}data/cylinder.stl"{}});}
\DoxyCodeLine{\ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ \&vert\ :\ cylinder\_stl.\mbox{\hyperlink{classnetdem_1_1_s_t_l_model_a74db86ccf2a6a377aa4d7b0057f5082a}{vertices}})\ \{}
\DoxyCodeLine{\ \ \ \ vert[2]\ *=\ 0.5;}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{\ \ cylinder\_stl.\mbox{\hyperlink{classnetdem_1_1_s_t_l_model_ad63749f1cf41df85a3d7237025200a0b}{SaveAsSTL}}(\textcolor{stringliteral}{"{}tmp/tests/cylinder\_outer.stl"{}});}
\DoxyCodeLine{\ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ \&facet\ :\ cylinder\_stl.\mbox{\hyperlink{classnetdem_1_1_s_t_l_model_a6c82d2e74216bf22886b41737b67b0ca}{facets}})\ \{}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{classnetdem_1_1_triangle}{Triangle}}\ triangle(cylinder\_stl.\mbox{\hyperlink{classnetdem_1_1_s_t_l_model_a74db86ccf2a6a377aa4d7b0057f5082a}{vertices}}[facet[0]],}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cylinder\_stl.\mbox{\hyperlink{classnetdem_1_1_s_t_l_model_a74db86ccf2a6a377aa4d7b0057f5082a}{vertices}}[facet[1]],}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cylinder\_stl.\mbox{\hyperlink{classnetdem_1_1_s_t_l_model_a74db86ccf2a6a377aa4d7b0057f5082a}{vertices}}[facet[2]]);}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{auto}\ shape\_ptr\ =\ sim-\/>\mbox{\hyperlink{classnetdem_1_1_simulation_add17bfcd927bd2b7f14f05855c20bea3}{scene}}.\mbox{\hyperlink{classnetdem_1_1_scene_a398e24fbcba078c40b7970edbe44e325}{InsertShape}}(\&triangle);}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{classnetdem_1_1_wall}{Wall}}\ wall(shape\_ptr);}
\DoxyCodeLine{\ \ \ \ sim-\/>\mbox{\hyperlink{classnetdem_1_1_simulation_add17bfcd927bd2b7f14f05855c20bea3}{scene}}.\mbox{\hyperlink{classnetdem_1_1_scene_ad0c28b5e5de3a1f8e785faa1a40c26b3}{InsertWall}}(wall);}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ \&vert\ :\ cylinder\_stl.\mbox{\hyperlink{classnetdem_1_1_s_t_l_model_a74db86ccf2a6a377aa4d7b0057f5082a}{vertices}})\ \{}
\DoxyCodeLine{\ \ \ \ vert[0]\ *=\ 0.15;}
\DoxyCodeLine{\ \ \ \ vert[1]\ *=\ 0.15;}
\DoxyCodeLine{\ \ \ \ vert[2]\ *=\ 0.64;}
\DoxyCodeLine{\ \ \ \ vert[2]\ -\/=\ 0.10;}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{\ \ cylinder\_stl.\mbox{\hyperlink{classnetdem_1_1_s_t_l_model_ad63749f1cf41df85a3d7237025200a0b}{SaveAsSTL}}(\textcolor{stringliteral}{"{}tmp/tests/cylinder\_inner.stl"{}});}
\DoxyCodeLine{\ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ \&facet\ :\ cylinder\_stl.\mbox{\hyperlink{classnetdem_1_1_s_t_l_model_a6c82d2e74216bf22886b41737b67b0ca}{facets}})\ \{}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{classnetdem_1_1_triangle}{Triangle}}\ triangle(cylinder\_stl.\mbox{\hyperlink{classnetdem_1_1_s_t_l_model_a74db86ccf2a6a377aa4d7b0057f5082a}{vertices}}[facet[0]],}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cylinder\_stl.\mbox{\hyperlink{classnetdem_1_1_s_t_l_model_a74db86ccf2a6a377aa4d7b0057f5082a}{vertices}}[facet[1]],}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cylinder\_stl.\mbox{\hyperlink{classnetdem_1_1_s_t_l_model_a74db86ccf2a6a377aa4d7b0057f5082a}{vertices}}[facet[2]]);}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{auto}\ shape\_ptr\ =\ sim-\/>\mbox{\hyperlink{classnetdem_1_1_simulation_add17bfcd927bd2b7f14f05855c20bea3}{scene}}.\mbox{\hyperlink{classnetdem_1_1_scene_a398e24fbcba078c40b7970edbe44e325}{InsertShape}}(\&triangle);}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{classnetdem_1_1_wall}{Wall}}\ wall(shape\_ptr);}
\DoxyCodeLine{\ \ \ \ sim-\/>\mbox{\hyperlink{classnetdem_1_1_simulation_add17bfcd927bd2b7f14f05855c20bea3}{scene}}.\mbox{\hyperlink{classnetdem_1_1_scene_ad0c28b5e5de3a1f8e785faa1a40c26b3}{InsertWall}}(wall);}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \mbox{\hyperlink{classnetdem_1_1_s_t_l_model}{STLModel}}\ propeller\_stl;}
\DoxyCodeLine{\ \ propeller\_stl.\mbox{\hyperlink{classnetdem_1_1_s_t_l_model_abb01a9583427f88f59d2abdf79b1e981}{InitFromSTL}}(\textcolor{stringliteral}{"{}data/copyleft/propeller.stl"{}});}
\DoxyCodeLine{\ \ propeller\_stl.\mbox{\hyperlink{classnetdem_1_1_s_t_l_model_aafbdce68eec88494326403f8302b98a0}{Standardize}}();}
\DoxyCodeLine{\ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ \&vert\ :\ propeller\_stl.\mbox{\hyperlink{classnetdem_1_1_s_t_l_model_a74db86ccf2a6a377aa4d7b0057f5082a}{vertices}})\ \{}
\DoxyCodeLine{\ \ \ \ vert[0]\ *=\ 0.14;}
\DoxyCodeLine{\ \ \ \ vert[1]\ *=\ 0.14;}
\DoxyCodeLine{\ \ \ \ vert[2]\ *=\ 0.8;}
\DoxyCodeLine{\ \ \ \ vert[2]\ -\/=\ 0.075;}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{\ \ propeller\_stl.\mbox{\hyperlink{classnetdem_1_1_s_t_l_model_ad63749f1cf41df85a3d7237025200a0b}{SaveAsSTL}}(\textcolor{stringliteral}{"{}tmp/tests/propeller.stl"{}});}
\DoxyCodeLine{\ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ \&facet\ :\ propeller\_stl.\mbox{\hyperlink{classnetdem_1_1_s_t_l_model_a6c82d2e74216bf22886b41737b67b0ca}{facets}})\ \{}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{classnetdem_1_1_triangle}{Triangle}}\ triangle(propeller\_stl.\mbox{\hyperlink{classnetdem_1_1_s_t_l_model_a74db86ccf2a6a377aa4d7b0057f5082a}{vertices}}[facet[0]],}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ propeller\_stl.\mbox{\hyperlink{classnetdem_1_1_s_t_l_model_a74db86ccf2a6a377aa4d7b0057f5082a}{vertices}}[facet[1]],}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ propeller\_stl.\mbox{\hyperlink{classnetdem_1_1_s_t_l_model_a74db86ccf2a6a377aa4d7b0057f5082a}{vertices}}[facet[2]]);}
\DoxyCodeLine{\ \ \ \ triangle.skin\ *=\ 10.0;}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{auto}\ shape\_ptr\ =\ sim-\/>\mbox{\hyperlink{classnetdem_1_1_simulation_add17bfcd927bd2b7f14f05855c20bea3}{scene}}.\mbox{\hyperlink{classnetdem_1_1_scene_a398e24fbcba078c40b7970edbe44e325}{InsertShape}}(\&triangle);}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{classnetdem_1_1_wall}{Wall}}\ wall;}
\DoxyCodeLine{\ \ \ \ wall.SetShape(shape\_ptr,\ \textcolor{keyword}{true});}
\DoxyCodeLine{\ \ \ \ wall.SetVelocitySpin(0,\ 0,\ -\/2.0\ *\ Math::PI);}
\DoxyCodeLine{\ \ \ \ sim-\/>\mbox{\hyperlink{classnetdem_1_1_simulation_add17bfcd927bd2b7f14f05855c20bea3}{scene}}.\mbox{\hyperlink{classnetdem_1_1_scene_ad0c28b5e5de3a1f8e785faa1a40c26b3}{InsertWall}}(wall);}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordtype}{int}\ main(\textcolor{keywordtype}{int}\ argc,\ \textcolor{keywordtype}{char}\ **argv)\ \{}
\DoxyCodeLine{\ \ \mbox{\hyperlink{classnetdem_1_1_simulation}{Simulation}}\ *sim\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classnetdem_1_1_simulation}{Simulation}}();}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ sim-\/>\mbox{\hyperlink{classnetdem_1_1_simulation_a59b3aaba47a3a50145306b90ce26d049}{domain\_manager}}.\mbox{\hyperlink{classnetdem_1_1_domain_manager_a0da42ac0d44dbc628207a02c0763f978}{SetBound}}(-\/0.6,\ -\/0.6,\ -\/0.6,\ 0.6,\ 0.6,\ 0.6);}
\DoxyCodeLine{\ \ sim-\/>\mbox{\hyperlink{classnetdem_1_1_simulation_a59b3aaba47a3a50145306b90ce26d049}{domain\_manager}}.\mbox{\hyperlink{classnetdem_1_1_domain_manager_a369081a4f895fc460ef631e5215fb399}{SetCellSpacing}}(0.2,\ 0.2,\ 0.2);}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \mbox{\hyperlink{classnetdem_1_1_linear_spring}{LinearSpring}}\ cnt\_model\ =\ \mbox{\hyperlink{classnetdem_1_1_linear_spring}{LinearSpring}}(1.0e4,\ 1.0e4,\ 0.7,\ 0.5);}
\DoxyCodeLine{\ \ sim-\/>\mbox{\hyperlink{classnetdem_1_1_simulation_add17bfcd927bd2b7f14f05855c20bea3}{scene}}.\mbox{\hyperlink{classnetdem_1_1_scene_a16e8cd7195ba20a9d0bee14498b69c4f}{InsertContactModel}}(\&cnt\_model);}
\DoxyCodeLine{\ \ sim-\/>\mbox{\hyperlink{classnetdem_1_1_simulation_add17bfcd927bd2b7f14f05855c20bea3}{scene}}.\mbox{\hyperlink{classnetdem_1_1_scene_a37580ce0b6492c6580c85a999aae8397}{SetNumberOfMaterials}}(1);}
\DoxyCodeLine{\ \ sim-\/>\mbox{\hyperlink{classnetdem_1_1_simulation_add17bfcd927bd2b7f14f05855c20bea3}{scene}}.SetCollisionModel(0,\ 0,\ cnt\_model.\mbox{\hyperlink{classnetdem_1_1_contact_model_ac452f37ee577eb8e2cefa4156d9c62ab}{label}});}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \mbox{\hyperlink{classnetdem_1_1_sphere}{Sphere}}\ sphere\ =\ \mbox{\hyperlink{classnetdem_1_1_sphere}{Sphere}}(0.02);}
\DoxyCodeLine{\ \ sphere.skin\ *=\ 1.0;}
\DoxyCodeLine{\ \ \textcolor{keyword}{auto}\ shape\_ptr\ =\ sim-\/>\mbox{\hyperlink{classnetdem_1_1_simulation_add17bfcd927bd2b7f14f05855c20bea3}{scene}}.\mbox{\hyperlink{classnetdem_1_1_scene_a398e24fbcba078c40b7970edbe44e325}{InsertShape}}(\&sphere);}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ VecXT<Particle>\ particle\_list\ =\ PackGenerator::GetGridPack(}
\DoxyCodeLine{\ \ \ \ \ \ 0.7,\ 0.7,\ 0.1,\ 0,\ 0,\ 0.2,\ 25,\ 20,\ 2,\ sim-\/>\mbox{\hyperlink{classnetdem_1_1_simulation_add17bfcd927bd2b7f14f05855c20bea3}{scene}}.\mbox{\hyperlink{classnetdem_1_1_scene_aaaf2e298f7e7bbd9dc8e34ec683a23f4}{GetShapes}}());}
\DoxyCodeLine{\ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ \&p\ :\ particle\_list)\ \{}
\DoxyCodeLine{\ \ \ \ p.SetVelocity(0,\ 0,\ -\/2.0);}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ ImportWall(sim);}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \mbox{\hyperlink{classnetdem_1_1_gravity}{Gravity}}\ grav;}
\DoxyCodeLine{\ \ grav.\mbox{\hyperlink{classnetdem_1_1_gravity_a9172d8fb018fe1b553b3af50070a5788}{Init}}(sim);}
\DoxyCodeLine{\ \ sim-\/>\mbox{\hyperlink{classnetdem_1_1_simulation_a918a87f02a78aed6a311bf90d1061e72}{modifier\_manager}}.\mbox{\hyperlink{classnetdem_1_1_modifier_manager_a6748f7dfd9b3e8e9999c4981684a9945}{Insert}}(\&grav);}
\DoxyCodeLine{\ \ sim-\/>\mbox{\hyperlink{classnetdem_1_1_simulation_a918a87f02a78aed6a311bf90d1061e72}{modifier\_manager}}.\mbox{\hyperlink{classnetdem_1_1_modifier_manager_a75ba1abedb33d45398052ada3177baa2}{Enable}}(grav.label);}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \mbox{\hyperlink{classnetdem_1_1_data_dumper}{DataDumper}}\ data\_dumper;}
\DoxyCodeLine{\ \ data\_dumper.\mbox{\hyperlink{classnetdem_1_1_data_dumper_a3dba3724732b7159c81366a6cf09720a}{Init}}(sim);}
\DoxyCodeLine{\ \ data\_dumper.\mbox{\hyperlink{classnetdem_1_1_data_dumper_ae4299f2162ba78ec3fbc0f0bc9e9b2d7}{SetRootPath}}(\textcolor{stringliteral}{"{}tmp/out/"{}});}
\DoxyCodeLine{\ \ data\_dumper.\mbox{\hyperlink{classnetdem_1_1_data_dumper_ac80bd05d4083227c57b5f6598d53a095}{SetSaveByCycles}}(100);}
\DoxyCodeLine{\ \ data\_dumper.\mbox{\hyperlink{classnetdem_1_1_data_dumper_a5293b933c8d6a5576b613e681dab4102}{dump\_wall\_info}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{\ \ data\_dumper.\mbox{\hyperlink{classnetdem_1_1_data_dumper_a25b1cd6a1f55fb41ae1b94f9e3794a58}{dump\_shape\_info}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{\ \ sim-\/>\mbox{\hyperlink{classnetdem_1_1_simulation_a918a87f02a78aed6a311bf90d1061e72}{modifier\_manager}}.\mbox{\hyperlink{classnetdem_1_1_modifier_manager_a6748f7dfd9b3e8e9999c4981684a9945}{Insert}}(\&data\_dumper);}
\DoxyCodeLine{\ \ sim-\/>\mbox{\hyperlink{classnetdem_1_1_simulation_a918a87f02a78aed6a311bf90d1061e72}{modifier\_manager}}.\mbox{\hyperlink{classnetdem_1_1_modifier_manager_a75ba1abedb33d45398052ada3177baa2}{Enable}}(data\_dumper.label);}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ 20;\ i++)\ \{}
\DoxyCodeLine{\ \ \ \ sim-\/>\mbox{\hyperlink{classnetdem_1_1_simulation_add17bfcd927bd2b7f14f05855c20bea3}{scene}}.\mbox{\hyperlink{classnetdem_1_1_scene_a9e8ccb020b0ba1b5ab8626448ece42ae}{InsertParticle}}(particle\_list);}
\DoxyCodeLine{\ \ \ \ sim-\/>\mbox{\hyperlink{classnetdem_1_1_simulation_a358efcc8d6d906b11ef8fce7a2624943}{Run}}(0.1);}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{\ \ sim-\/>\mbox{\hyperlink{classnetdem_1_1_simulation_a358efcc8d6d906b11ef8fce7a2624943}{Run}}(2.0);}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \textcolor{keyword}{delete}\ sim;}
\DoxyCodeLine{\}}

\end{DoxyCodeInclude}
 